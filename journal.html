<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nháº­t kÃ½ â€” Nháº­t kÃ½ NÄƒng lá»±c</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="nav">
    <div class="container nav-inner">
      <a href="index.html" class="brand">NHáº¬T KÃ<span>NÄ‚NG Lá»°C</span></a>
      <button id="nav-toggle" class="hamburger" aria-label="Má»Ÿ menu">â˜°</button>
      <nav class="menu" id="nav-menu">
        <a href="index.html">Trang chá»§</a>
        <a href="journal.html" class="active">Nháº­t kÃ½</a>
        <a href="features.html">TÃ­nh nÄƒng</a>
        <a href="missions.html">Nhiá»‡m vá»¥</a>
        <a href="profile.html">Há»“ sÆ¡</a>
        <a href="login.html" id="logout-btn">ÄÄƒng xuáº¥t</a>
      </nav>
      <button id="theme-toggle" class="theme-toggle-btn" aria-label="Chuyá»ƒn chá»§ Ä‘á»">ğŸŒ™</button>
    </div>
  </header> 

  <main class="page">
    <div class="container">
      <h1>ğŸ“” Nháº­t kÃ½ phÃ¡t triá»ƒn nÄƒng lá»±c</h1>

      <form id="journal-form" class="journal-form">
        <input type="date" id="date" required>
        <input type="text" id="goal" placeholder="ğŸ¯ Má»¥c tiÃªu hÃ´m nay" required>
        <textarea id="activities" rows="3" placeholder="ğŸ’ª Hoáº¡t Ä‘á»™ng hÃ´m nay"></textarea>
        <input type="number" id="rating" min="1" max="10" placeholder="â­ ÄÃ¡nh giÃ¡ (1-10)" required>
        <button type="submit" class="btn">ğŸ’¾ LÆ°u nháº­t kÃ½</button>
      </form>

      <section class="chart-section">
        <h2>ğŸ“Š Biá»ƒu Ä‘á»“ tiáº¿n bá»™</h2>
        <canvas id="progressChart"></canvas>
      </section>

      <section class="log-list">
        <h2>ğŸ“ Nháº­t kÃ½ gáº§n Ä‘Ã¢y</h2>
        <ul id="journal-list"></ul>
      </section>
    </div>

    <section id="ai-analysis" class="ai-box">
      <h3>ğŸ§  PhÃ¢n tÃ­ch AI</h3>
      <p id="ai-result">ChÆ°a cÃ³ dá»¯ liá»‡u Ä‘á»ƒ phÃ¢n tÃ­ch.</p>
      <button id="analyze-btn" class="btn-ai">PhÃ¢n tÃ­ch biá»ƒu Ä‘á»“</button>
    </section>
  </main>

  <footer class="footer">Â© 2025 Nháº­t kÃ½ NÄƒng lá»±c</footer>

  <!-- ğŸ”¹ JS chÃ­nh -->
  <script type="module" src="main.js"></script>

  <!-- ğŸ”¹ ÄÃ¡nh dáº¥u hoÃ n thÃ nh nhiá»‡m vá»¥ m1 -->
  <script type="module">
    import { markMissionDone } from "./missionsTracker.js";

    const form = document.getElementById("journal-form");
    form?.addEventListener("submit", async (e) => {
      e.preventDefault();

      const text = document.getElementById("activities")?.value.trim() || "";
      if (text.length < 50) {
        alert("âœï¸ HÃ£y viáº¿t Ã­t nháº¥t 50 kÃ½ tá»± Ä‘á»ƒ hoÃ n thÃ nh nhiá»‡m vá»¥ nhÃ©!");
        return;
      }

      await markMissionDone("m1");
      alert("âœ… ÄÃ£ hoÃ n thÃ nh nhiá»‡m vá»¥ viáº¿t nháº­t kÃ½ (m1)!");
    });
  </script>
</body>
</html>
